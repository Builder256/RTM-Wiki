---
title: アドオン制作
description: アドオン制作方法の解説
published: true
date: 2025-01-14T15:38:55.975Z
tags: アドオン制作
editor: markdown
dateCreated: 2025-01-11T18:12:24.688Z
---

> このページは執筆中であり、今後内容が大幅に追加、変更される可能性があります。
{.is-warning}

# 概説

RealTrainModでは、一般のゲームや映像作品の制作にも使用されている`.mqo`や`.obj`形式のデータを読み込むことができるため、非常に精密な車両やアイテムのアドオンを制作することができます。また、前述の二種類の3Dモデルファイル形式以外にも、MC Terrain Editor (MCTE)で生成できるMinecraftのブロックデータを含む`.ngto`ファイルも使用することが可能です。
当Wikiでは、もっとも一般的な`.mqo`ファイルを使用したアドオンの制作方法を解説します。

# 必要なもの

* 根気
* 3DCG制作ソフト
* ペイントソフト
* テキストエディタ
* 大量の資料

## 根気

アドオン制作をする上で、もっとも重要なものが根気です。いかに鉄道やRealTrainModが好きであっても、根気がなければアドオン制作を成すことは不可能です。  
他の必要なものをすべて持っているのにもかかわらず、この根気がないためにアドオン制作を成せない人は非常に多いです。根気は必ず必要となりますので、これを必ず用意してからアドオン制作を始めることをおすすめいたします。

## 3DCG制作ソフト

アドオン制作にほぼ必須と言えるのが、3DCG制作ソフトです。RealTrainModでは、テトラフェイス社よりリリースされている3DCGモデラーであるMetasequoiaシリーズがよく使用されていますが、`.mqo`や`.obj`形式のデータに変換することさえできればどのようなソフトでもよいため、BlenderやMaya、3dsMax、Houdiniのような一般のゲームや映像作品の制作現場で使用されている統合型3DCGソフトウエアでも問題ありません。

## ペイントソフト

3DCG制作ソフトで制作された3Dモデルにマッピングするテクスチャを用意する必要があるため、ペイントソフトも多くの場合必要となります。Windows標準のペイントも使用することはできますが、アルファチャンネルや、レイヤーなどの機能を有していないため、それらの機能を持つペイントソフトを使用することが望ましいです。RealTrainModでは、無料で利用できるGIMPやpaint.netがよく使用されていますが、`.png`形式の画像データが作成できればよいため、Adobe PhotoshopやCLIP STUDIO PAINTなどのペイントソフトも使用することが可能です。

## テキストエディタ

アドオンの様々な設定項目の定義を行うJSONファイルの制作にテキストエディタが必要です。Windows標準のメモ帳も使用することはできますが、文字コードの詳細な設定やSyntax Errorの防止のためにVisual Studio CodeやAtom、Emacs、NotePad++のようなシンタックスハイライトや入力補完の機能があるテキストエディタが良いと考えられます。

## 大量の資料

制作するアドオンがどのようなものであれ、現実に存在する車両や物品を大いに参考にすることとなります。そのためには、写真や図面などの資料が必要不可欠です。より良いアドオンを制作するためには、多種多様な資料を調達し、アドオンの制作に昇華することが必要です。

# 制作手順

アドオンの制作手順には制作する各人により様々な手法があると考えられますが、大まかには次の通りと言えます。

1. 資料収集
2. モデリング
3. テクスチャ制作
4. マッピング
5. JSONコーディング
6. エラー処理
7. 完成

## 1. 資料収集

資料収集のためには、写真を撮影したり、インターネットで画像検索を行うことになります。また、鉄道関連の雑誌や書籍などにも資料が掲載されていることがありますので、書店や図書館を訪れ、少しでも多くの有用な資料を集めるために努力しましょう。

## 2. モデリング

3DCG制作ソフトを使用し、制作する車両や物品の形状を作る工程がモデリングです。モデリングについては既に様々な情報があるので詳細な説明は割愛いたしますが、RealTrainModで使用できる3Dモデルにはいくつかの制約があります。

* 車両の下端（線路の上面）は-100cm
* 凹四角形は使用しない
* 多角形は使用しない
* 法線の編集は反映されない
* 同一オブジェクトの面は頂点を分割しても反映されない

### 車両の下端（線路の上面）は-100cm

Metasequoiaの場合、車両の下端（線路の上面）はy=-100になります。これより下にオブジェクトを配置することも可能ですが、線路の下に配置されることになります。

### 凹四角形は使用しない

凹四角形を使用してもアドオンをロードすることは可能ですが、スムージングに不具合が生じ、予期せぬ結果となる可能性が高いため、凹四角形は使用しないほうがよいです。

### 多角形は使用しない

現在のバージョンのRealTrainModであれば、多角形をロードすることが可能となっていますが、使用しない方が望ましいです。RealTrainModでは、四角形以上の面は、あらかじめ複数個の三角形面に分割されて描画されますが、これはあくまで単純に面を分割するだけであるため、元の面と同じ形状になるかどうかを考慮していません。このため、多角形を使用した場合、本来の形状とは異なる形状で描画される可能性があるため、使用しないほうがよいです。

### 法線の編集は反映されない

RealTrainModでは、法線情報は無視され新たに法線を計算し描画されます。そのため、法線の編集を行っても反映されないばかりか、意図しない描画結果をもたらす可能性があるため、法線の編集はしない方が望ましいです。

### 同一オブジェクトの面は頂点を分割しても反映されない

RealTrainModでは、オブジェクトの面が接続しているのか、独立しているのかの情報は無視され、全て接続しているものと描画されます。そのため、スムージングを途切れさせ、オブジェクトの角を出すために面同士を分割しても、スムージングは途切れず意図しない描画結果となる可能性があります。スムージングを途切れさせたい場合には、それぞれの面を別のオブジェクトにする必要があります。

## 3. テクスチャ制作

モデリングで制作した3Dモデルの面に割り当てる画像を制作する工程がテクスチャ制作です。モデリングやマッピングと一部並行して行うこともありますが、モデリングしたオブジェクトに対しテクスチャを制作するという順序は必定だと考えられます。Minecraftにはシェーディングやライティングは存在しないため、テクスチャを作成する際にはそのことを考慮し、影や凹凸などを想像して描く技術が求められます。仮にそれらを考慮せず単色のみのテクスチャを制作した場合、せっかく作成した3Dモデルの形状を認識できず、モデリングの手間と時間を無駄にすることとなりますので、是非とも写実的となるテクスチャを制作することが望ましいです。
また、ノーマルマップや透過マップ、スペキュラマップも存在しないため、全てをテクスチャマップのみに盛り込む必要があります。

## 4. マッピング

3Dモデルのどの面に対し、テクスチャのどの部分を割り当てるかを指定する工程がマッピングです。特筆すべき点はありませんが、テクスチャは繰り返されているため、0から1以外の範囲のUV座標を指定することが可能です。

## 5. JSONコーディング

RealTrainModのアドオンの根幹となるのがJSONファイルです。RealTrainModは、まず最初にJSONファイルを解析し、それを元に3Dモデルやテクスチャを取得し、様々な機能を実装するため、JSONでの定義に誤りがあるとアドオンが正常に機能しなかったり、ゲームのクラッシュの原因となります。

## 6. エラー処理

ここまでの工程で、様々なエラーや予期しない結果を経ているはずです。それらの問題に正しく対処することが必要です。

## 7. 完成

おめでとうございます！長年のあなたの努力が遂に実を結び、アドオンが完成しました！あなたは夢にまで見た車両や物品を目の当たりにし、他の何物でも得難い高揚感を得ているものと考えられます。もしこの幸福を他人と共有したい場合には、アドオンを配布することができます。しかしながら、他人というのは非常に度し難いもので、あなたの唯一無二にして至上の作品に対しいかなる蛮行をもって報いるか知れたものではありません。そのため、配布するアドオンに対し、法的拘束力をもつ利用規約の設定を含む`readme.txt`ファイルを同梱することができます。`readme.txt`ファイルを執筆する際には以下のような項目を設けるとよいでしょう。

* アドオンの名称
* アドオンのバージョン
* 作者名
* 作者連絡先
* アドオンの制作に際し使用した作品
* アドオンの制作に際し助力を頂いた人物
* アドオンの改造を認めるか
* アドオンの二次配布を認めるか
* アドオンの商用利用を認めるか
* アドオンをインターネット上でどのように使用してよいか
* アドオンを使用したことによって発生した損害に作者はどのような責任を負うか
* これらの利用規約に違反した場合はどのような処遇によって報いるか
* アドオンの知的財産権はどこの国の法律によって保護されているか
* これらの利用規約にいつの時点において同意したものとみなすか
* 更新履歴

これらの項目を適切に設定することで、あなたの作品に泥を塗らんとする愚劣な卑怯者に引導を渡すことができます。もしこれらの項目を設定しなかった場合、RealTrainModのライセンスに基づき、RealTrainMod本体のライセンスが適用されるため、あなたの望まない結果となる可能性があります。必ず設定するようにしましょう。






