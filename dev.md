---
title: アドオン制作
description: アドオン制作方法の解説
published: true
date: 2025-02-25T15:51:58.734Z
tags: アドオン制作
editor: markdown
dateCreated: 2025-01-11T18:12:24.688Z
---

> このページは執筆中であり、今後内容が大幅に追加、変更される可能性があります。
{.is-warning}

# 概説
RealTrainMod（RTM）は、一般のゲームや映像作品の制作にも使用されているMQO形式（`.mqo`）やMQOZ形式（`.mqoz`）OBJ形式（`.obj`）のデータを読み込むことができるため、非常に精密な車両やアイテムのアドオンを制作することができます。また、前述の二種類の3Dモデルファイル形式以外にも、MC Terrain Editor (MCTE)で生成できるMinecraftのブロックデータを含むNGTO形式（`.ngto`）やそれを圧縮したNGTZ形式（`.ngtz`）のファイルも使用することが可能です。
RTM Wikiでは、もっとも一般的なMQO形式の3Dモデルファイルを使用したアドオンの制作方法を解説します。

# 必要なもの
* 根気
* 3DCG制作ソフト
* ペイントソフト
* テキストエディタ
* 大量の資料

## 根気
アドオン制作をする上で、もっとも重要なのは根気です。いかに鉄道やRealTrainModが好きであっても、根気がなければアドオン制作を成し遂げることはできません。
他の必要なものをすべて持っていたとしても、この根気がないためにアドオン制作を断念してしまう方が非常に多いです。根気は必ず必要となりますので、これをしっかりと用意してからアドオン制作を始めることをおすすめします。

## 3DCG制作ソフト
アドオン制作にほぼ必須と言えるのが、3DCG制作ソフトです。RTMでは、テトラフェイス社よりリリースされている3DCGモデラーであるMetasequoiaシリーズがよく使用されていますが、MQOやOBJ形式のデータに変換できればどのようなソフトでも問題ありません。BlenderやMaya、3dsMax、Houdiniなど、一般のゲームや映像作品の制作現場で使用されている統合型3DCGソフトウェアも使用できます。

## ペイントソフト
3DCG制作ソフトで制作した3Dモデルにマッピングするテクスチャを用意するため、ペイントソフトも多くの場合必要となります。Windows標準のペイントも使用できますが、アルファチャンネルやレイヤーなどの機能がないため、それらの機能を持つペイントソフトを使用することが望ましいです。RealTrainModでは、無料で利用できるGIMPやpaint.netがよく使用されていますが、PNG形式（`.png`）の画像データが作成できれば、Adobe PhotoshopやCLIP STUDIO PAINT、ibisPaintなどのペイントソフトも使用できます。

## テキストエディタ
アドオンのさまざまな設定項目を定義するJSONファイルや高度な設定を行うスクリプトファイル（`.js`）の作成にテキストエディタが必要です。Windows標準のメモ帳も使用できますが、文字コードの詳細な設定やシンタックスエラーの防止のため、Visual Studio CodeやAtom、NotePad++など、JSONとJavaScriptに対応したシンタックスハイライトや入力補完機能のあるテキストエディタを推奨します。

## 大量の資料
制作するアドオンがどのようなものであれ、現実に存在する車両や物品を大いに参考にすることとなります。そのため、写真や図面などの資料が必要不可欠です。より良いアドオンを制作するためには、多種多様な資料を調達し、アドオン制作に活かすことが大切です。

# 制作手順
アドオンの制作手順は制作者によってさまざまですが、大まかには次の通りです。
1. 資料収集
2. モデリング
3. テクスチャ制作
4. マッピング
5. JSONコーディング
6. エラー処理
7. 完成

## 1. 資料収集
資料収集のためには、写真を撮影したり、インターネットで画像検索を行うことになります。また、鉄道関連の雑誌や書籍などにも資料が掲載されていることがありますので、書店や図書館を訪れて、できるだけ多くの有用な資料を集めるようにしましょう。

## 2. モデリング
3DCG制作ソフトを使用し、制作する車両や物品の形状を作る工程がモデリングです。モデリングについては既に多くの情報があるため詳細な説明は割愛しますが、RealTrainModで使用できる3Dモデルにはいくつかの制約があります。

- 輪軸の踏面（線路の上面）は-100cm
- 凹四角形は使用しない
- 多角形は使用しない
- 法線の編集は反映されない
- 同一オブジェクトの面は頂点を分割しても反映されない

### 輪軸の踏面（線路の上面）は-100cm
Metasequoiaの場合、輪軸の踏面（線路の上面）はy=-100になります。これより下にオブジェクトを配置することも可能ですが、線路の下に配置されることになります。

### 凹四角形は使用しない
凹四角形を使用してもアドオンをロードすることは可能ですが、スムージングに不具合が生じ、予期せぬ結果となる可能性が高いため、凹四角形は使用しないことを推奨します。

### 多角形は使用しない
現在のバージョンのRealTrainModであれば、多角形をロードすることが可能となっていますが、使用しない方が望ましいです。RealTrainModでは、四角形以上の面は、あらかじめ複数個の三角形面に分割されて描画されますが、これは単純に面を分割するだけであるため、元の面と同じ形状になるかどうかは考慮されません。このため、多角形を使用した場合、本来の形状とは異なる形状で描画される可能性があるため、使用しないことを推奨します。

### 法線の編集は反映されない
RTMでは、法線情報は無視され新たに法線を計算し描画されます。そのため、法線の編集を行っても反映されないばかりか、意図しない描画結果をもたらす可能性があるため、法線の編集はしないことを推奨します。

### 同一オブジェクトの面は頂点を分割しても反映されない
RealTrainModでは、オブジェクトの面同士が接続しているのか、独立しているのかの情報は無視され、すべて接続しているものとして描画されます。そのため、スムージングを途切れさせ、オブジェクトの角を出すために面同士を分割しても、スムージングは途切れず意図しない描画結果となる可能性があります。スムージングを途切れさせたい場合には、それぞれの面を別のオブジェクトにする必要があります。

## 3. テクスチャ制作
モデリングで制作した3Dモデルの面に割り当てる画像を制作する工程がテクスチャ制作です。モデリングやマッピングと一部並行して行うこともありますが、モデリングしたオブジェクトに対しテクスチャを制作するという順序が一般的です。Minecraftにはシェーディングやライティングは存在しないため、テクスチャを作成する際にはそのことを考慮し、影や凹凸などを想像して描く技術が求められます。もしそれらを考慮せず単色のみのテクスチャを制作した場合、せっかく作成した3Dモデルの形状が認識しづらくなり、モデリングの手間と時間を無駄にしてしまうことになりますので、できるだけ写実的なテクスチャを制作することを推奨します。
また、ノーマルマップや透過マップ、スペキュラマップも存在しないため、すべてをテクスチャマップのみに盛り込む必要があります。

## 4. マッピング
3Dモデルのどの面に対し、テクスチャのどの部分を割り当てるかを指定する工程がマッピングです。特筆すべき点はありませんが、テクスチャは繰り返されているため、0から1以外の範囲のUV座標を指定することが可能です。

## 5. JSONコーディング
RTMのアドオンの根幹となるのがJSONファイルです。RTMは、まず最初にJSONファイルを解析し、それを元に3Dモデルやテクスチャを取得し、さまざまな機能を実装します。JSONでの定義に誤りがあるとアドオンが正常に機能しなかったり、ゲームのクラッシュの原因となることがあります。

## 6. エラー処理
ここまでの工程で、さまざまなエラーや予期しない結果が発生しているはずです。それらの問題に正しく対処することが必要です。

## 7. 完成
おめでとうございます！長年の努力がついに実を結び、アドオンが完成しました。あなたは夢にまで見た車両や物品を目の当たりにし、他の何物にも代えがたい高揚感を得ていることでしょう。もしこの幸福を他の方と共有したい場合には、アドオンを配布することもできます。ただし、他人というのは非常に多様で、あなたの唯一無二の作品に対してどのような反応を示すか分かりません。そのため、配布するアドオンには、法的拘束力を持つ利用規約の設定を含む`readme.txt`ファイルを同梱することを推奨します。`readme.txt`ファイルを作成する際には、以下のような項目を設けるとよいでしょう。

- アドオンの名称
- アドオンのバージョン
- 作者名
- 作者連絡先
- アドオンの制作に際し使用した作品
- アドオンの制作に際し助力を頂いた人物
- アドオンの改造を認めるか
- アドオンの二次配布を認めるか
- アドオンの商用利用を認めるか
- アドオンをインターネット上でどのように使用してよいか
- アドオンを使用したことによって発生した損害に作者はどのような責任を負うか
- これらの利用規約に違反した場合はどのような処遇によって報いるか
- アドオンの知的財産権はどこの国の法律によって保護されているか
- これらの利用規約にいつの時点において同意したものとみなすか
- 更新履歴

これらの項目を適切に設定することで、あなたの作品を守ることができます。もしこれらの項目を設定しなかった場合、RTMのライセンスに基づき、RTM本体のライセンスが適用されるため、あなたの望まない結果となる可能性があります。必ず設定するようにしましょう。

# 関連サイト
- [RTM車両制作向け役立ち(そうな)情報まとめ | RTM Addon Search *このページについて本ページは主に水音車両(meitetsu600V)が見かけた車両制作に関する情報をまとめたものになります。車両制作時の参考にお使い下さい。・あくまで個人の主観に基づくものになりますのでここに掲載しているものが正解の手法ではありません。・アップデート等により情報が古くなる場合があります。・基本的に引用してまとめたものになります。体裁は整えておりません。本ページに記載したい情報がありましたら(自薦、他薦問わず)水音車両のX(旧twitter)*](https://rtmaddon-search.com/trainproductioninformation/)
- [はじめてのRTM【パック作成編】 | RTM Addon Search *ここでは、TTK+と呼ばれる作成キットを用いながら、RTMの追加パックの基本構成を動画で学ぶことができます。*](https://rtmaddon-search.com/how_to_rtm/how_to_makeaddon1/)
- [アドオン製作ガイド - RTMwiki | Gamerch](https://gamerch.com/realtrainmod/677473)
- [Static Wind - Takami Train Kit *minecraftの鉄道Mod「RealTrainMod」用の車両モデルキットの解説*](https://staticwind.soragoto.net/rtm/tkmtk/index.html)
{.links-list}

*[RTM]: RealTrainMod