---
aliases:
  - JSONファイルの設定内容
title: JSONファイルの設定内容
---
このページでは、RealTrainMod（RTM）のアドオン制作に使用するJSONファイルの種類と用途、そしてJSONの文法について説明します。
## JSONとは
JSONは、JavaScript Object Notationの略で、テキストベースのデータ記述言語です。  
わかりやすく言えば、**人間と機械の両方が読み書きしやすい辞書形式のメモ書き**のようなものです。

仕様を遵守したJSONは、人間やコンピュータが必ず同じ解釈をできるため、**完全に正確**にデータを伝え合うことができます。  
このため、コンピュータやインターネットのさまざまな場面でデータのやり取りや保存に利用されています。
## JSONファイルの用途
RTMでは、以下の3つの用途でJSONファイルを使用します。
1. モデル設定用  
   列車やレールなどの複雑な設定が必要なモデルの追加には必ず必要になる。  
   最も使用頻度が多い。
2. 音声イベント設定用  
   加速や減速などの操作で発火する音声イベントと、実際の音声ファイルを結びつける役割がある。  
   RTMに限らずMinecraft全体で利用されており、そのファイル名から`sounds.json`とも呼ばれる。  
3. アップデート通知設定用  
   アドオンの更新をユーザーに通知するために使用する。  
   検証されたアップデート情報は、プレイヤーがワールドにログインした際に通知される。

各JSONファイルでの具体的な設定方法については、以下のそれぞれの解説ページを参照してください。
- [モデル設定用JSONファイルの設定方法](model)
- [音声イベント設定用JSONファイルの設定方法](dev/file/json/sound)
- [アップデート通知設定用JSONファイルの設定方法](dev/file/json/pack)

## RTMのJSONファイルのルール
RTMでは、JSONファイルについて独自のルールがあります。  
これは、RTMが開発された当初は現在のJSON標準であるRFC8259が発表されていなかったためです。
1. 文字エンコーディングは、基本的に`UTF-8`の`BOM`なし（`UTF-8N`とも）を使用する  
   BOMつきのUTF-8は正常に解釈されない場合があり、エラーを発生させる可能性があるため、使用できません。    
   （必要に応じて`Shift-JIS`を使用することもあります。）
2. 定義されていないキーがあってもよい（本来不要なキーを追加してもエラーにならない）
<!-- ## JSONの基本的な文法
JSONの基本的な文法について説明します。  
これは、RTMに限らない普遍的な知識なので、他の用途でも役立つでしょう。

JSONは、冒頭で「辞書形式のメモ書き」と説明したように、以下のように辞書に似た特徴を持つことを確認します。

1. 「名前」と「値」の組み合わせからなる  
   辞書が、見出し語と語釈の二つから構成されているように、説明する対象「名前（キー）」と、その意味である「値（バリュー）」から構成されます。  
   また、どこまでが名前で、どこからが値をはっきり区別するために、間に`:`（コロン）が必要です
    - 書き方： `"名前": 値`
    - 例：
      ```json
      "title": "Minecraft"
      ```
      この場合には、`title`が名前（キー）`Minecraft`が値（バリュー）になります
2. 全体は`{ }`（波括弧）で囲む  
   辞書は、バラバラな単語を表紙と裏表紙で囲って一冊にしていますが、JSONも`{ }`（波括弧）で全体を囲む必要があります。  
   また、RTMでは必ず`{ }`で囲む（オブジェクトにする）必要がありますが、一般的には`[ ]`（角括弧）で囲って配列にすることもできます。
    - 例：
        ```json
        {
          "title": "Minecraft",
          "year": 2011
        }
        ```
3. 名前（キー）は必ずダブルクォーテーション（`"`）で囲む  
   辞書では、見出し語は太字になっていたり、大きい文字になっていてわかりやすくされています。  
   それと同様に、名前をダブルクォーテーションで囲み、わかりやすくする必要があります。
    - ✅ `"name": "Steve"`
    - ❌ `name: "Steve"` ←エラー
4. 値の書き方  
   辞書では、意味だけではなく、読み仮名や他の表記、類語など様々な内容が記されていますが、それと同様に、様々な種類の値を指定することができます。  
   ただし、文脈で内容を理解できる人間とは違い、コンピュータはそれができません。  
   そのため、それが**どのような種類の値**なのかを表現するために、値の種類に応じて、以下のように書き方を変える必要があります。
    - 文字列 ``（ `"` で囲む）  
      単純な文字や文字列です。値と同様に`"`で囲みますが、間にコロンがあるため区別できます。
        ```json
        "player": "Alex"
        ```
    - 数値（そのまま）  
      文字列としての数字ではなく、数値としての数字です。
        ```json
        "score": 100
        ```
    - 真偽値（`true` / `false`）  
      真偽値とは、`true`（真）と`false`（偽）の二種類のみで構成される、マルとバツに似たようなものです。（マルが`true`、バツが`false`に相当）
        ```json
        "isOnline": true
        ```
    - 何もない（`null`）  
      RTMではあまり使用しませんが、どんな値も指定しておらず、値が空ということを示すために使用します。  
      この場合では、どんなペットも飼っていないということを、値`null`を使用して表しています。
        ```json
        "pet": null
        ```
    - 配列（`[ ]`で囲む、複数の値を並べる）  
      辞書でも、複数の意味があるときに1番の意味、2番の意味…というように表記しますが、それと同じです。
        ```json
        "items": ["sword", "shield", "apple"]
        ```
    - オブジェクト（さらに`{ }` で囲む、入れ子にできる）  
      オブジェクトとは、辞書に入れ子にできる、一回り小さい辞書です。このオブジェクトも同様に辞書なので、今までと同じように名前と値を指定します。  
      （より正確には、JSON全体がオブジェクトです。全体を`{ }`で囲むということは、オブジェクトを作っているということですし、名前もJavaScript **Object** Notationですから。）
        ```json
        "position": { "x": 10, "y": 20 }
        ```
5. 名前と値のペアの間には、`,`（カンマ）を入れて区切る  
   辞書では、見出し語同士の間は必ず改行され、見出し語が列の一番上に並ぶようになっていますが、JSONでは改行しないようにすることができるため、代わりに`,`を使います。
    - ペアや配列の要素の間には必ず入れる
    - 配列やオブジェクトの最後の項目の後にはカンマを入れない
    - 例：
        ```json
        {
          "name": "Steve",
          "health": 20,
          "isOnline": true
        }
        ```
6. コメントは書けない  
    - 一般的なコンピュータ言語とは異なり、JSONはコメント（人間だけが読め、コンピュータは無視する部分）を使用できません。
    - 以下は、一般的なJSONについての説明であり、RTMでは利用しません（すべきでない）。
	    - 慣習として、 `"__comment__"`や、`"_comment"`のような項目を使用してコメントを擬似的に使用することもあります。
	    - 一部のソフトウェアでは、`// ...`や`/* ... */`などのコメントを許容したり、上記の項目を無視する仕組みを採用して、コメントできるようにすることもあります。
	    - 拡張子が`.json`であっても、中身には改造されたJSONが使われることもあります。

JSON全体としては、以下のようになります。
```json
{
  "name": "Steve",
  "health": 20,
  "items": [
	  {
		  "name": "Stone Block",
		  "qty": 64
	  },
	  {
		  "name": "Diamond Pickaxe",
		  "enchantments": ["silk-touch", "mending"],
		  "durability": 1239,
		  "isHolding": true
	  }
  ],
  "position": {
	  "x": 2147483647,
    "y": 320,
    "z": 29999872
	},
  "isOnline": true
}
``` -->
## JSONの文法
JSONは「オブジェクト」と「配列」でデータを記述します。
### 1. オブジェクト
オブジェクトは、「名前（キー）」と「値（バリュー）」のペアを持つデータのまとまりです。  
キーと値は`:`（コロン）で区切り、各ペアは`,`カンマで区切ります。  
そして、1つまたは複数のペアを`{ }`（波括弧）でまとめたものが、「オブジェクト」です。
```json
{
	"name": "Diamond Pickaxe",
	"enchantments": ["silk-touch", "mending"],
	"durability": 1239,
	"isHolding": true
}
```
この例において、コロンの左側にある`"name"`や、`"enchantments"`などが「キー」です。  
キーは`"`（ダブルクォーテーション）で囲む必要があります。

コロンの右側にある`"Diamond Pickaxe"`や、`["silk-touch", "mending"]`などが「値」です。  
「値」には、様々な種類（データ型）があり、後述します。
### 2. 配列
配列は、複数の「値」を順番に並べたデータのリストです。  
「値」と「値」の間は`,`カンマで区切り、複数の値を`[ ]`（角括弧）でまとめたものが、「配列」です。
```json
[
  "Stone Block",
  "Diamond Pickaxe",
  "Iron Ingot"
]
```
この例において、`"Stone Block"`や、`"Diamond Pickaxe"`などが「値」です。  
オブジェクトと同様に、「値」には様々なデータ型を使用することができます。
### オブジェクトと配列の違い
オブジェクトは、どのようなものでも一つにまとめられるのに対し、配列は同種、同質のものをまとめることが多いです。  
例えば、上記のオブジェクトの例では、`"name"`や`"enchantments"`など、全く異なる種類の情報を一つにまとめていますが、配列の例では、すべてが「アイテム名」という同じ種類の情報をまとめています。
### データ型
JSONには、値の種類を示す「データ型」があります。
- 文字列（string）  
  文字列は、`"`（ダブルクォーテーション）で囲まれたいくつかの文字です。  
  例えば、`"Minecraft"`や、`"Hello, World!"`などがあります。
- 数値（number）  
  整数は、数値のデータとしてとして扱われる文字です。  
  例えば、`100`や、`3.14`、`-42`などがあります。
- 真偽値（boolean）  
  真偽値は、`true`（真）または`false`（偽）のいずれかです。  
  ある物事がそうであるか、そうでないかということを示すもので、平たく言えばマル（`true`に対応）やバツ（`false`に対応）というようなものです。
- オブジェクト（Object）  
  オブジェクトは、「名前（キー）」と「値（バリュー）」のペアを持つデータのまとまりです。  
  先ほど説明したJSONの構造である「オブジェクト」も、データ型の一つです。
- 配列（Array）  
  配列は、複数の「値」を順番に並べたデータのリストです。  
  先ほど説明したJSONの構造である「配列」も、データ型の一つです。
- null  
  nullは、値が存在しないことを示します。

### データの組み合わせ
これらのデータを組み合わせることで、様々な情報を表現することができます。

例えば、以下の例ではそれぞれのデータ型を組み合わせて、プレイヤーの情報を表現しています。
```json
{
  "name": "Steve",
  "health": 20,
  "items": [
    {
      "name": "Stone Block",
      "qty": 64
    },
    {
      "name": "Diamond Pickaxe",
      "enchantments": ["silk-touch", "mending"],
      "durability": 1239,
      "isHolding": true
    }
  ],
  "position": {
    "x": 2147483647,
    "y": 320,
    "z": 29999872
  },
  "isOnline": true
}
```
この例で分かるように、大きな構造として「オブジェクト」や「配列」などを持ちます。  
そして、その中のより小さな構造として「名前と値のペア」や、「ペアの値としてのオブジェクトや配列」などを組み合わせることで、複雑なデータ構造を表現します。