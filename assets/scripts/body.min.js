function adjustDescriptionAreaHeight(){var e,o,t=document.querySelector(".page-header-section");t?(e=t.firstElementChild)?((e=e instanceof HTMLElement?e.offsetHeight:0)||console.warn("[adjustDescriptionAreaHeight] contentHeight is not found!"),o=e+38+"px",t instanceof HTMLElement&&parseInt(t.style.height,10)!==e+38&&(t.style.height=o)):console.warn("[adjustDescriptionAreaHeight] contentWrapper is not found!"):console.warn("[adjustDescriptionAreaHeight] descriptionArea is not found!")}function replaceWithYouTubeEmbeddedPlayer(){var e,o=document.querySelectorAll("p.embed-yt-vid"),t=o.length;console.info(`[replaceWithYouTubeEmbeddedPlayer] ${1===t?"a":t} YouTube Video ID${1===t?" was":"s were"} found.`+(0!==t?" Embedding players...":""));for(e of o){var n,r,a=e.textContent?.trim();a?/^[a-zA-Z0-9_-]{11}$/.test(a)?((n=document.createElement("iframe")).src="https://www.youtube-nocookie.com/embed/"+a,n.frameBorder="0",n.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",n.allowFullscreen=!0,n.classList.add("embedded-youtube-video"),(r=e.parentNode)?r.replaceChild(n,e):console.warn("[replaceWithYouTubeEmbeddedPlayer] parentNode is not found!",e)):console.warn(`[replaceWithYouTubeEmbeddedPlayer] ${a} is not valid YouTube video ID!`):console.warn("[replaceWithYouTubeEmbeddedPlayer] YouTube video ID is unspecified!")}}function openExternalLinkInNewTab(){var e,o=document.querySelectorAll("a.is-external-link"),t=o.length;console.info(`[openExternalLinkInNewTab] ${1===t?"an":t} external link${1===t?" was":"s were"} found.`+(0!==t?" Setting attributes...":""));for(e of o)e.setAttribute("target","_blank"),e.setAttribute("rel","noopener")}function changeHeadingLinkIcons(){var o=document.querySelectorAll("a.toc-anchor"),e=o.length;console.info(`[changeHeadingLinkIcons] ${1===e?"a":e} header${1===e?" was":"s were"} found.`+(0!==e?" Changing icons...":""));for(let e of o)e.querySelector(".v-icon")||(e.textContent="",e.insertAdjacentHTML("afterbegin",'<div class="v-icon mdi mdi-link-variant"></div>'),e.addEventListener("click",()=>{copyToClipboard(e)}))}function copyToClipboard(e){let t=e.href;navigator.clipboard?navigator.clipboard.writeText(t).then(()=>{console.log("URL copied to clipboard:",t);var e=document.documentElement.lang||"ja",o={ja:"URLをクリップボードにコピーしました:\n","zh-tw":"URL已複製到剪貼簿:\n",en:"URL copied to clipboard:\n"};alert((o[e]||o.en)+decodeURI(t))}).catch(()=>{console.error("Clipboard write failed"),alert("URLのコピーに失敗しました。手動でコピーしてください。")}):(console.warn("Clipboard API is not supported in this browser."),alert("このブラウザではコピー機能がサポートされていません。リンクを手動でコピーしてください。"))}function convertImagesToFigures(){var e=Array.from(document.querySelectorAll(".contents > div > p")),o=["#text","img","br","em","strong","a"],t=o.filter(e=>"img"!==e);n=o,r=t;var n,r,a;for(a of e.filter(e=>!!Array.from(e.childNodes).every(e=>n.includes(e.nodeName.toLowerCase()))&&"img"===e.firstChild?.nodeName.toLowerCase()&&!!(e=e.lastChild)&&!!r.includes(e?.nodeName.toLowerCase()))){var i,d=(e=>{var o,t=[];let n=null;for(o of e.childNodes)"img"===o.nodeName.toLowerCase()?(n&&t.push(n),n={image:o,caption:[]}):n?.caption.push(o);return n&&t.push(n),t})(a),l=document.createElement("div");l.classList.add("images-row");for(i of d){for(var c,s=document.createElement("figure"),u=(s.appendChild(i.image),document.createElement("figcaption")),p=[...i.caption];"BR"===p[0].nodeName;)p.shift();for(;"BR"===p.at(-1)?.nodeName;)p.pop();for(c of p)u.appendChild(c);s.appendChild(u),l.appendChild(s)}a.replaceWith(l)}}window.addEventListener("resize",adjustDescriptionAreaHeight),window.boot.register("page-ready",()=>{adjustDescriptionAreaHeight(),replaceWithYouTubeEmbeddedPlayer(),openExternalLinkInNewTab(),changeHeadingLinkIcons(),convertImagesToFigures()}),convertImagesToFigures();